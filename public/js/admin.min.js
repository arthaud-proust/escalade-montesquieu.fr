function loadTimePicker(){if(0!=$("#datetimepicker").length){var a=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate());try{$("#datetimepicker").datetimepicker({format:"yyyy-mm-dd HH:MM",footer:!0,modal:!0,minDate:a,locale:"fr-fr",uiLibrary:"bootstrap4",change:function(a){$("#datetimepicker").val().length<19&&$("#datetimepicker").val($("#datetimepicker").val()+":00")}})}catch(a){console.error(a),setTimeout(loadTimePicker,500)}}}$(()=>{function a(a){let e=$(this).parents(".MemberCard").attr("data-name");0!=members.filter(a=>a.name==e).length&&(members.splice(members.indexOf(e),1),confirm(`Voulez vous supprimez de la liste ${e}?`)&&axios({method:"DELETE",url:`/admin/member/${e}`}).then(a=>{200==a.status&&$(`.MemberCard[data-name="${e}"`).remove()}))}function e(e){let t=$(e.target).parents(".MemberCard").find(".MemberCard-name").val(),r=$(e.target).parents(".MemberCard").find(".MemberCard-class").val();t=t.toLowerCase().split(" ");for(var i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);t=t.join(" "),members.filter(a=>a.name==t).length>0||""!=t&&""!=r&&(members.push({name:t,classroom:r}),axios({method:"POST",url:"/admin/member",data:{name:t,classroom:r}}).then(i=>{$(e.target).parents(".MemberCard").find(".MemberCard-name").val(""),$(e.target).parents(".MemberCard").find(".MemberCard-class").val(""),200==i.status&&($("#AdminLayout-membersList").append(`\n                    <div class="MemberCard col-12 col-md-6" data-name="${t}">\n                        <div class="MemberCard-header">\n                            <h3 class="MemberCard-name">${t} <small>${r}</small></h3>\n                        </div>\n                        <div class="MemberCard-actions">\n                            <button class="MemberCard-delete">Supprimer</button>\n                        </div>\n                    </div>\n                `),$(".MemberCard-delete").on("click",a))}))}loadTimePicker(),$(".blog-form #name").on("keyup",function(){$(".blog-form #slug").val(window.removeDiacritics($(this).val()))}),$(".gallery-form #name").on("keyup",function(){$(".gallery-form #slug").val(window.removeDiacritics($(this).val()))}),$(".photo-form #name").on("keyup",function(){$(".photo-form #slug").val(window.removeDiacritics($(this).val()))}),$(".forum-form #name").on("keyup",function(){$(".forum-form #slug").val(window.removeDiacritics($(this).val()))}),$(".InfoCard-delete").click(function(a){let e=$(this).parents(".InfoCard").attr("data-id");confirm("Voulez vous supprimez cette information?")&&axios({method:"DELETE",url:`/admin/info/${e}`}).then(a=>location.reload())}),$(".InfoCard-add").click(function(a){$("#modalEdit").attr("data-id","0"),$("#modalEdit").attr("data-method","POST"),$("#modalEdit .modal-title").text("Ajouter une information"),$("#modalEdit").find(".InfoCard-title").val(""),$("#modalEdit").find("textarea.InfoCard-content").val(""),$("#modalEdit").modal("show")}),$(".InfoCard-edit").click(function(a){$("#modalEdit").attr("data-id",$(this).parents(".InfoCard").attr("data-id")),$("#modalEdit").attr("data-method","PUT"),$("#modalEdit .modal-title").text("Editer l'information"),$("#modalEdit").find(".InfoCard-title").val($(this).parents(".InfoCard").find(".InfoCard-title").text()),$("#modalEdit").find("textarea.InfoCard-content").val($(this).parents(".InfoCard").find(".InfoCard-content").text()),$("#modalEdit").modal("show")}),$("#editInfo").on("click",function(a){let e=$("#modalEdit").attr("data-method"),t=$("#modalEdit").find(".InfoCard-title").val(),r=$("#modalEdit").find("textarea.InfoCard-content").val();axios({method:e,url:`/admin/info${"PUT"==e?`/${$("#modalEdit").attr("data-id")}`:""}`,data:{title:t,content:r}}).then(a=>location.reload())}),$(".UserCard-delete").click(function(a){let e=$(this).parents(".UserCard").attr("data-name"),t=$(this).parents(".UserCard").attr("data-uuid");confirm(`Voulez vous supprimez l'utilisateur ${e}?`)&&axios({method:"DELETE",url:`/admin/user/${t}`}).then(a=>location.reload())}),$(".UserCard-changeLevel").change(function(a){let e=$(this).parents(".UserCard").attr("data-name"),t=$(this).parents(".UserCard").attr("data-uuid"),r=$(this).find("option:selected").val();confirm(`Voulez vous mettre l'utilisateur ${e} au rang ${["d'utilisateur","de modÃ©rateur","d'administrateur"][r-1]}?`)&&axios({method:"PUT",url:`/admin/user/${t}`,data:{level:r}}).then(a=>location.reload())}),$(".MemberCard-delete").click(a),$(".MemberCard-add").click(e),$("input.MemberCard-class").on("keyup",function(a){13==a.which&&e(a)}),$("#blog").on("change",function(){"false"!=$("#title").attr("data-changed")&&""!=$("#title").val()||($("#title").val($(this).find(":selected").html()),$("#title").attr("data-changed","false"))}),$("#title").keypress(function(){$(this).attr("data-changed","true")}),$("#maxplaces-toggle").click(function(){$(this).is(":checked")?($("#maxplaces").attr("data-before",$("#maxplaces").val()),$("#maxplaces").val("-1"),$("#maxplaces").prop("readonly",!0)):($("#maxplaces").val($("#maxplaces").attr("data-before")),$("#maxplaces").prop("readonly",!1))}),"-1"==$("#maxplaces").val()&&($("#maxplaces").prop("readonly",!0),$("#maxplaces-toggle").prop("checked",!0),$("#maxplaces").attr("data-before","10"))});
